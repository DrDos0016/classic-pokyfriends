{% extends "main.html" %}
{% load staticfiles %}

{% block opengraph %}
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@doscoon" />
<meta name="twitter:title" content="{{title}}" />
<meta name="twitter:description" content="{{post.summary}}" />
<meta name="twitter:image" content="http://pokyfriends.com/blog/assets/posts/{{post.id}}/preview.png" />
{% endblock %}

{% block main %}
<div id="main">
<div class="block post">
    <h2>{{post.link|safe}}</h2>
    <div class="meta">
        <div class="date">{{post.timestamp}}</div>
        {% if post.source %}<div class="source">Originally located at: <a href="{{post.source}}" target="_blank">{{post.source}}</a></div>{% endif %}
    </div>
    
    {% if has_pages %}
    <nav class="pages">
        Pages:<br>
        {% for p in page_count %}
        {% if forloop.counter != 1 %} &bull; {% endif %}<a href="/blog/{{post.id}}/{{post.title|slugify}}?p={{forloop.counter}}"{% if forloop.counter == page %} class="selected"{% endif %}>{{p}}</a>
        {% endfor %}
    </nav>
    {% endif %}
    
    {% if ADS %}
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Pokyfriends Blog responsive -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-4412759244252723"
         data-ad-slot="2115202160"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    {% endif %}
    
    <article class="content">
    {{post.content|safe}}
    </article>
    
    {% if ADS %}
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Pokyfriends Blog responsive -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-4412759244252723"
         data-ad-slot="2115202160"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    {% endif %}
    
    {% if has_pages %}
    <nav class="pages">
        Pages:<br>
        {% for p in page_count %}
        {% if forloop.counter != 1 %} &bull; {% endif %}<a href="/blog/{{post.id}}/{{post.title|slugify}}?p={{forloop.counter}}"{% if forloop.counter == page %} class="selected"{% endif %}>{{p}}</a>
        {% endfor %}
    </nav>
    {% endif %}
    
    <div class="tags">{% for tag in post.tags.all %}<div class="tag"><a href="/blog/tagged/{{tag.slug}}">#{{tag.name}}</a></div>{% endfor %}</div>
</div>

<div id="pages">
    {% if post.id != 1 %}<a href="/blog/prev/{{post.id}}"><div class="block button" style="float:left">
    Previous Post
    </div></a>{% endif %}
    
    {% if post.id != latest.0.id %}<a href="/blog/next/{{post.id}}"><div class="block button" style="float:right">
    Next Post
    </div></a>{% endif %}
</div>
</div>
{% endblock %}

{% block sidebar %}
<div id="sidebar">
    <div class="block about">
        <h3>About</h3>
        <div class="logo"><img src="{% static 'images/meowth/'|add:meowth|add:'.jpg' %}"></div>
        <p>I'm <a href="mailto:doctordos@gmail.com">Dr. Dos</a>, and sometimes I produce articles and other fun web pages.<br>I make sure it's preserved here and not lost to time.</p>
    </div>

    <div class="block latest">
        <h3>Latest Entries</h3>
        <ul>
        {% for post in latest %}
        <li>{{post.link|safe}}</li>
        {% endfor %}
        </ul>
        <div class="all"><a href="/blog/archive">View All</a></div>
    </div>

    {% if ADS %}
    <div class="block ad">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Pokyfriends Blog responsive -->
        <ins class="adsbygoogle"
             style="display:block;max-width:170px;"
             data-ad-client="ca-pub-4412759244252723"
             data-ad-slot="2115202160"
             data-ad-format="vertical"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    {% endif %}

    <div class="block tagged">
        <h3>Random Tags</h3>
        {% for tag in tagged %}
        <a href="/blog/tagged/{{tag.slug}}">#{{tag.name}}</a>
        {% endfor %}
        <br>
        <div class="all"><a href="/blog/tagged">View All</a></div>
    </div>
</div>
{% endblock %}