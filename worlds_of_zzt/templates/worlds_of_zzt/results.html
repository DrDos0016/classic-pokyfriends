{% extends "worlds_of_zzt/woz_main.html" %}
{% load staticfiles %}

{% block opengraph %}{% endblock %}

{% block main %}
<div id="main">
    <div class="block">
            <h1>Closer Look - Patron Poll Results</h1>
            
            <div class="poll">
                <div class="option cp437">
                    <img src="{% static 'worlds_of_zzt/poll/'|add:poll.option1.image %}">
                    <br>
                    <span class="title">{{poll.option1.name}}</span>
                    <br>
                        by {{poll.option1.author}}, {{poll.option1.released|date:"M. Y"}}
                    <br>
                    <p>{{poll.option1.summary}}</p>
                </div>
                
                <div class="option cp437">
                    <img src="{% static 'worlds_of_zzt/poll/'|add:poll.option2.image %}">
                    <br>
                    <span class="title">{{poll.option2.name}}</span>
                    <br>
                        by {{poll.option2.author}}, {{poll.option2.released|date:"M. Y"}}
                    <br>
                    <p>{{poll.option2.summary}}</p>
                </div>
                
                <div class="option cp437">
                    <img src="{% static 'worlds_of_zzt/poll/'|add:poll.option3.image %}">
                    <br>
                    <span class="title">{{poll.option3.name}}</span>
                    <br>
                        by {{poll.option3.author}}, {{poll.option3.released|date:"M. Y"}}
                    <br>
                    <p>{{poll.option3.summary}}</p>
                </div>
                
                <div class="option cp437">
                    <img src="{% static 'worlds_of_zzt/poll/'|add:poll.option4.image %}">
                    <br>
                    <span class="title">{{poll.option4.name}}</span>
                    <br>
                        by {{poll.option4.author}}, {{poll.option4.released|date:"M. Y"}}
                    <br>
                    <p>{{poll.option4.summary}}</p>
                </div>
                
                <div class="option cp437">
                    <img src="{% static 'worlds_of_zzt/poll/'|add:poll.option5.image %}">
                    <br>
                    <span class="title">{{poll.option5.name}}</span>
                    <br>
                        by {{poll.option5.author}}, {{poll.option5.released|date:"M. Y"}}
                    <br>
                    <p>{{poll.option5.summary}}</p>
                </div>
            </div>
            
            <br>
            
            <form method="POST" id="form" class="cp437">
                <label style="background-color:#0000AA">{{poll.option1.name}} <div class="fr{% if winning == 1 %} winning {% endif %}">{{totals.0}}</div></label>
                <label style="background-color:#00AA00">{{poll.option2.name}} <div class="fr{% if winning == 2 %} winning {% endif %}">{{totals.1}}</div></label>
                <label style="background-color:#00AAAA">{{poll.option3.name}} <div class="fr{% if winning == 3 %} winning {% endif %}">{{totals.2}}</div></label>
                <label style="background-color:#AA0000">{{poll.option4.name}} <div class="fr{% if winning == 4 %} winning {% endif %}">{{totals.3}}</div></label>
                <label style="background-color:#AA00AA">{{poll.option5.name}} <div class="fr{% if winning == 5 %} winning {% endif %}">{{totals.4}}</div></label>
            </form>
        
            <h1>Results Info</h1>
            <ul>
                <li>Results shown reflect the current votes in the database prior to filtering ineligible votes.</li>
                <li>Current totals may differ from the final results!</li>
                <li>In the event of a tie, priority will be given to Patron selected poll options.</li>
                <li>If two Patron selected options tie, a winner will be selected randomly</li>
            </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
$(document).ready(function (){
    $(".option img").click(function (){
        if ($(this).css("max-width") != "480px")
        {
            $(this).css({"max-width":"480px", "cursor":"zoom-out"});
            $(this).parent().css("width","480px");
        }
        else
        {
            $(this).css({"max-width":"240px", "cursor":"zoom-in"});
            $(this).parent().css("width","240px");
        }
    });
});
</script>
{% endblock %}